import{_ as C,u as D,z as E,A as w,a as h,B as S,i as N,C as B,D as M,c as u,o as p,b as a,m as q,t as r,n as F,k as U,p as L,d as v,e as _,v as k,x as f,E as $,g as z,h as G,G as I,H as R}from"./index-Cd8uA6a5.js";const A={class:"wrap"},H={class:"hdr"},P={key:0,class:"error"},Y={key:1,class:"error"},j={key:2,class:"error"},J=["min"],K={key:3,class:"error"},O={style:{"margin-top":"12px"}},Q={type:"submit"},W={__name:"TaskFormView",setup(X){const y=E(),V=G(),c=D(),g=y.params.id?Number(y.params.id):null,m=w(()=>!!g),d=h(o=>o.tasks.current),b=w(()=>{const o=new Date,t=o.getFullYear(),n=String(o.getMonth()+1).padStart(2,"0"),i=String(o.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}),s=S({title:"",description:"",status:"pending",due_date:""}),e=S({title:"",description:"",status:"",due_date:""});function T(){e.title=e.description=e.status=e.due_date="";const o=(s.title||"").trim(),t=(s.description||"").trim(),n=s.status,i=s.due_date;let l=!0;return o||(e.title="El título es obligatorio.",l=!1),t||(e.description="La descripción es obligatoria.",l=!1),n?["pending","in_progress","completed"].includes(n)||(e.status="Estado inválido.",l=!1):(e.status="Selecciona un estado.",l=!1),i?i<b.value&&(e.due_date="La fecha no puede ser menor a la fecha actual.",l=!1):(e.due_date="La fecha de vencimiento es obligatoria.",l=!1),l}N(async()=>{m.value?(await c(B(g)),d.value&&(s.title=d.value.title||"",s.description=d.value.description||"",s.status=d.value.status||"pending",s.due_date=d.value.due_date||"")):c(M())});const x=async()=>{if(!T())return;const o={title:s.title.trim(),description:s.description.trim(),status:s.status,due_date:s.due_date};m.value?await c(I({id:g,...o})):await c(R(o)),V.push({name:"tasks"})};return(o,t)=>{const n=L("router-link");return p(),u("div",A,[a("header",H,[a("h2",null,r(m.value?"Editar Tarea":"Nueva Tarea"),1),q(n,{to:{name:"tasks"}},{default:F(()=>[...t[4]||(t[4]=[U("Volver",-1)])]),_:1})]),a("form",{onSubmit:z(x,["prevent"]),novalidate:""},[t[6]||(t[6]=a("label",null,"Título*",-1)),v(a("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>s.title=i),class:f({invalid:!!e.title}),required:"",autocomplete:"off"},null,2),[[k,s.title]]),e.title?(p(),u("small",P,r(e.title),1)):_("",!0),t[7]||(t[7]=a("label",null,"Descripción*",-1)),v(a("textarea",{"onUpdate:modelValue":t[1]||(t[1]=i=>s.description=i),rows:"4",class:f({invalid:!!e.description}),required:""},null,2),[[k,s.description]]),e.description?(p(),u("small",Y,r(e.description),1)):_("",!0),t[8]||(t[8]=a("label",null,"Estado*",-1)),v(a("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>s.status=i),class:f({invalid:!!e.status}),required:""},[...t[5]||(t[5]=[a("option",{value:"pending"},"pending",-1),a("option",{value:"in_progress"},"in_progress",-1),a("option",{value:"completed"},"completed",-1)])],2),[[$,s.status]]),e.status?(p(),u("small",j,r(e.status),1)):_("",!0),t[9]||(t[9]=a("label",null,"Fecha de vencimiento*",-1)),v(a("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=i=>s.due_date=i),min:b.value,class:f({invalid:!!e.due_date}),required:""},null,10,J),[[k,s.due_date]]),e.due_date?(p(),u("small",K,r(e.due_date),1)):_("",!0),a("div",O,[a("button",Q,r(m.value?"Guardar":"Crear"),1)])],32)])}}},tt=C(W,[["__scopeId","data-v-1b2b1344"]]);export{tt as default};
